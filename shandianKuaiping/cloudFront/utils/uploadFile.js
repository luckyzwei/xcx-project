let Promise = require('./es6-promise');function wxPromisify(fn) {    return function (obj = {}) {        return new Promise((resolve, reject) => {            obj.success = function (res) {                console.log("请求成功，返回数据：");                console.log(res.data);                wx.hideToast();                resolve(res.data);            };            obj.fail = function (req) {                console.log('请求失败，返回参数：');                console.log(req);                wx.hideToast();                reject(req);            };            fn(obj);        })    };}Promise.prototype.finally = function (callback) {    let P = this.constructor;    return this.then(        value => P.resolve(callback()).then(() => value),        reason => P.resolve(callback()).then(() => {            throw reason        })    );};function wxUploadFile(params={},url) {    let data = params.query || {};    wx.showToast({        title:"请稍后...",        icon:"loading",        duration:10000    });    let wxtUploadFile = wxPromisify(wx.uploadFile);    return wxtUploadFile({        url:url,        name:'file',        filePath:data,        header:{            "Authorization":  params.token.type + ' ' + params.token.values        }    })}module.exports = {    uploadFile:wxUploadFile}